{
  "scopeName": "source.mush",
  "patterns": [
    {
      "include": "#comments"
    },
    {
      "include": "#directives"
    },
    {
      "include": "#substitutions"
    },
    {
      "include": "#commands"
    },
    {
      "include": "#functions"
    },
    {
      "include": "#attributes"
    },
    {
      "include": "#flags"
    },
    {
      "include": "#strings"
    }
  ],
  "repository": {
    "comments": {
      "patterns": [
        {
          "match": "^\\s*(//|@@).*$",
          "name": "comment.line.mush"
        },
        {
          "begin": "/\\*",
          "end": "\\*/",
          "name": "comment.block.mush"
        }
      ]
    },
    "directives": {
      "patterns": [
        {
          "match": "^\\s*#(include|define|ifdef|ifndef|else|endif|undef)",
          "name": "keyword.control.directive.mush"
        }
      ]
    },
    "substitutions": {
      "match": "%(#|[0-9]|n|N|p|P|s|S|r|t|c|<|>|\\()",
      "name": "variable.language.mush"
    },
    "commands": {
      "patterns": [
        {
          "match": "(?i)(^|;|\\|)\\s*(@LISTCOMMANDS|@APPLY_MARKED|@QUITPROGRAM|@FORWARDLIST|@ADISCONNECT|@ADDCOMMAND2|@NEWPASSWORD|@IDLETIMEOUT|@DESCFORMAT|@STARTSLAVE|@EXITFORMAT|@ADDCOMMAND|@NAMEFORMAT|@DELCOMMAND|@REFERENCE2|@LIST_FILE2|@ODESCRIBE|@ENTRANCES|@ADESCRIBE|@SPEECHMOD|@SAYSTRING|@REFERENCE|@TIMECHECK|@READCACHE|@CONFORMAT|@ATTRIBUTE|@ALLOWANCE|@SIGNATURE|@DECOMPILE|@LIST_FILE|@COMLEAVE|@ASUCCESS|@QUEUEMAX|@INFILTER|@DESCRIBE|@PROGRAM2|@TIMEWARP|@ACONNECT|@ADESTROY|@FUNCTION|inventory|@CDESTROY|@VRML_URL|@TELEPORT|@OSUCCESS|@SHUTDOWN|@MAILSUCC|@PASSWORD|@CHOWNALL|@LISTMOTD|@MARK_ALL|@INPREFIX|@COFLAGS|@ATOFAIL|@OTOFAIL|@SUCCESS|@CPFLAGS|@CHARGES|@RXLEVEL|@DESTROY|@OXLEAVE|@STARTUP|@APARENT|@CCHARGE|@OXTPORT|@TRIGGER|@MALIAS2|@MONIKER|@COMJOIN|@OXENTER|@VERSION|@CCREATE|@DISABLE|@TXLEVEL|@TIMEOUT|@RESTART|@PROGRAM|@COMMENT|@PCREATE|@ACREATE|@DBCLEAN|@COMOFF|@UNLINK|@CCHOWN|@RUNOUT|@SEARCH|@ADFAIL|@REJECT|@AEFAIL|@AGFAIL|@CLIST2|@LALIAS|@AUFAIL|@CREATE|@LISTEN|@CLONE2|@CHZONE|@NPEMIT|@OUFAIL|@ALFAIL|@OTPORT|@ATPORT|@IFELSE|@ASSERT|@CPATTR|@EALIAS|whisper|@AENTER|@OLEAVE|@SWITCH|@ACLONE|@CLONE3|@BACKUP|@PARENT|@ALEAVE|@PREFIX|@OTFAIL|@HTDESC|@AMHEAR|@AAHEAR|@UNLOCK|@ODFAIL|@ENABLE|@EXITTO|@NOTIFY|@FILTER|@ORFAIL|@DOLIST|@FOLDER|@OGFAIL|@TOFAIL|@OENTER|@CHOWN2|@OEFAIL|@ARFAIL|@OLFAIL|@ATFAIL|@MALIAS|@MVATTR|@OEMIT|@TFAIL|@EFAIL|@IDESC|@HOOK2|@REMIT|@FIXDB|@DAILY|@COMON|@DFAIL|@BREAK|@GFAIL|@EMAIL|@ICMD3|@ADROP|@LFAIL|@POWER|@DOING|@MFAIL|@CLONE|@ODROP|@FEMIT|@AHEAR|@UFAIL|@CBOOT|@QUERY|@CLIST|@ADMIN|@PEMIT|@SWEEP|@QUOTA|@OMOVE|@FPOSE|@NEMIT|@VERB3|@STATS|@ENTER|@OKILL|@CHOWN|@AFAIL|@HOOK3|@AMAIL|@ALIAS|@VERB2|@ICMD2|@OFAIL|@TPORT|@AMOVE|@ROBOT|@CEMIT|@DRAIN|@LINK2|@RFAIL|@LEAVE|@AKILL|@FORCE|@SET2|@EVAL|@LOCK|@DBCK|think|@FLAG|@POLL|@KILL|@CSET|@DUMP|score|@BOOT|@VERB|@NAME|@LAST|@APAY|@LINK|@IDLE|@HALT|@MOTD|@POOR|@MOVE|@LIST|@EMIT|@OUSE|@ICMD|@AUSE|@WAIT|@EDIT|@OPEN|@FIND|@OPAY|@HOOK|@MAIL|@CWHO|@TOAD|@MARK|@DROP|@FSAY|@WALL|@KICK|@AWAY|@COST|@FAIL|@WIPE|drop|look|pose|@DIG|@SEX|@CUT|@PAY|@USE|page|@LOG|@SET|@PS|say|get|@@)\\b",
          "name": "keyword.control.command.mush"
        }
      ]
    },
    "attributes": {
      "patterns": [
        {
          "match": "(?i)(^|;|\\|)\\s*(&|@)[a-zA-Z0-9_]+",
          "name": "storage.type.mush"
        }
      ]
    },
    "functions": {
      "patterns": [
        {
          "begin": "(?i)\\[(STRIPACCENTS|RESTARTSECS|LISTRLEVELS|RESTARTTIME|HASTXLEVEL|COLORDEPTH|CONNRECORD|REGRABALLI|DISTRIBUTE|SINGLETIME|LASTCREATE|HASRXLEVEL|FILTERBOOL|SUCCESSES|DIGITTIME|STRIPANSI|WRITETIME|RSRECPREV|LATTRCMDS|ENTRANCES|REGRABALL|RSRELEASE|REMAINDER|TRANSLATE|REGMATCHI|STARTTIME|RSRECNEXT|STARTSECS|CONNTOTAL|FLOORDIV|PICKRAND|CONVTIME|ALPHAMIN|SITEINFO|SCRAMBLE|CONVSECS|MATCHALL|MAILSUBJ|STRMATCH|TERMINFO|CANDBOOL|SPELLNUM|EDEFAULT|REVWORDS|ELEMENTS|GET_EVAL|REGMATCH|CHILDREN|MAILSIZE|RESTARTS|LOCALIZE|HASQUOTA|CHANNELS|ANDFLAGS|HASATTRP|CONNLAST|SETUNION|ALPHAMAX|COMTITLE|COMALIAS|FULLNAME|HASPOWER|STRTRUNC|ETIMEFMT|CONNLEFT|UDEFAULT|MAILFROM|CONTROLS|FINDABLE|BASECONV|TEXTFILE|SETINTER|FOREACH|TIMEFMT|GRABALL|SUBEVAL|VERSION|LDELETE|TRIGGER|DEFAULT|BITTYPE|RSERROR|EXTRACT|CONNMAX|RXLEVEL|ORFLAGS|MUDNAME|ITEMIZE|REGRABI|CHANOBJ|SETDIFF|LPARENT|DESTROY|EXPTIME|OBJEVAL|ANDBOOL|TXLEVEL|SHUFFLE|PLAYMEM|HASTYPE|VISIBLE|ATTRCNT|REPLACE|MONIKER|CONNNUM|ISDBREF|HASATTR|ENCRYPT|COLUMNS|WORDPOS|CORBOOL|HASFLAG|DECRYPT|DUMPING|REVERSE|ACCENT|MEMBER|DIST3D|ULOCAL|LROOMS|RSROWS|SEARCH|STRCAT|OBJMEM|PARENT|CANSEE|SWITCH|REPEAT|PMATCH|LPORTS|STRMEM|SPLICE|VCROSS|ESCAPE|LFLAGS|CENTER|CREATE|BEFORE|NEARBY|CHOOSE|RSPREV|UNPACK|DIGEST|REGRAB|FILTER|HEIGHT|REMOVE|INZONE|SECURE|IFELSE|LATTRP|ISWORD|SQUISH|LEXITS|RSNEXT|CONFIG|FCOUNT|CAPSTR|INSERT|ORBOOL|DIST2D|DELETE|STRLEN|SORTBY|LOCATE|POWERS|FDEPTH|ISNUM|PEMIT|UCSTR|MATCH|ITEXT|ROMAN|PFIND|ISIGN|RSREC|REMIT|AFTER|WORDS|LRAND|ERROR|ROUND|ATAN2|DOING|BNAND|CEMIT|MONEY|TABLE|FLAGS|TRACE|OEMIT|WIDTH|GREPI|INDEX|ISRAT|LCMDS|MUNGE|PORTS|LJUST|CRC32|ELOCK|RIGHT|LATTR|PARSE|WHERE|CTIME|MTIME|ISINT|MERGE|OWNER|SPACE|TRUNC|RJUST|STATS|FLOOR|FIRST|VALID|LCSTR|POWER|STRIP|VUNIT|APOSS|SUBJ|ILEV|TYPE|ITER|ZFUN|VDIM|RAND|GRAB|BAND|IADD|CWHO|HOME|EXIT|FMOD|LWHO|STEP|ROOM|ATAN|CONN|WIPE|LMIN|ISUB|FDIV|NEXT|SQRT|VADD|EVAL|SIGN|EDIT|VMUL|LPAD|CPAD|PACK|REST|BXOR|IDIV|ZWHO|ZONE|ASIN|TIME|XGET|RPAD|MOTD|LOCK|IDLE|VMAG|LNUM|NAME|ANSI|CMDS|LAST|SETR|INUM|ACOS|TRIM|CEIL|LCON|LAND|LINK|LIST|CAND|NULL|IABS|SETQ|HOST|POLL|VSUB|LADD|FOLD|WRAP|CASE|LMAX|COMP|SORT|MAIL|RLOC|VDOT|POSS|LPOS|IMUL|GREP|SHA1|SECS|EMIT|BEEP|CON|BOR|NEQ|MIN|SHR|GET|SET|EXP|TEL|CAT|MID|XOR|MIX|LTE|SQL|NOT|DIV|CTU|ORD|ABS|COS|LOG|ADD|MAP|CHR|NUM|MUL|DEC|LIT|ART|MOD|LOR|OBJ|TAN|SIN|SUB|DIE|COR|MAX|POS|AND|INC|GTE|SHL|LOC|TR|EQ|@@|LT|IF|GT|OR|LN|PI|E|S|T|U|V|R)\\b",
          "beginCaptures": {
            "1": {
              "name": "support.function.mush"
            }
          },
          "end": "\\]",
          "name": "meta.function-call.mush",
          "patterns": [
            {
              "include": "$self"
            }
          ]
        },
        {
          "begin": "\\[",
          "end": "\\]",
          "name": "meta.function-call.unknown.mush",
          "patterns": [
            {
              "include": "$self"
            }
          ]
        }
      ]
    },
    "flags": {
      "match": "\\b(PLAYER_MATCH_OWN_COMMANDS|FUNCTION_INVOCATION_LIMIT|TERSE_SHOWS_MOVE_MESSAGES|FUNCTION_RECURSION_LIMIT|COMMAND_QUOTA_INCREMENT|PARENT_RECURSION_LIMIT|NOTIFY_RECURSION_LIMIT|PUBLIC_CHANNEL_ALIAS|REGISTER_CREATE_FILE|LOCK_RECURSION_LIMIT|GUESTS_CHANNEL_ALIAS|PLAYER_STARTING_HOME|PLAYER_STARTING_ROOM|ZONE_RECURSION_LIMIT|TERSE_SHOWS_CONTENTS|EXAMINE_PUBLIC_ATTRS|MACHINE_COMMAND_COST|KILL_GUARANTEE_COST|MONEY_NAME_SINGULAR|REFERENCES_PER_HOUR|PLAYER_NAME_CHARSET|WIZARD_MOTD_MESSAGE|USER_ATTR_PER_HOUR|UNCOMPRESS_PROGRAM|MATCH_OWN_COMMANDS|PLAYER_QUEUE_LIMIT|PLAYER_NAME_SPACES|TRACE_OUTPUT_LIMIT|THING_NAME_CHARSET|SWITCH_DEFAULT_ALL|QUEUE_ACTIVE_CHUNK|KEEPALIVE_INTERVAL|FIXED_HOME_MESSAGE|LOGOUT_CMD_ACCESS|DESTROY_GOING_NOW|FIXED_TEL_MESSAGE|EVENTS_DAILY_HOUR|CLONE_COPIES_COST|TERSE_SHOWS_EXITS|MONEY_NAME_PLURAL|ROOM_NAME_CHARSET|COMMAND_QUOTA_MAX|PARANOID_ALLOCATE|FIND_MONEY_CHANCE|FULL_MOTD_MESSAGE|CACHE_TICK_PERIOD|EXIT_NAME_CHARSET|ATTR_NAME_CHARSET|DOWN_MOTD_MESSAGE|PEMIT_FAR_PLAYERS|GLOBAL_ERROR_OBJ|CONNECT_REG_FILE|LOGOUT_CMD_ALIAS|FASCIST_TELEPORT|USER_ATTR_ACCESS|PCREATE_PER_HOUR|SACRIFICE_FACTOR|READ_REMOTE_DESC|READ_REMOTE_NAME|POSTDUMP_MESSAGE|SACRIFICE_ADJUST|COMPRESS_PROGRAM|WIZARD_MOTD_FILE|PASSWORD_METHODS|QUEUE_IDLE_CHUNK|PEMIT_ANY_OBJECT|CREATE_MIN_COST|MAIL_EXPIRATION|COMSYS_DATABASE|ATTR_CMD_ACCESS|OUTPUT_DATABASE|FUNCTION_ACCESS|CREATE_MAX_COST|DEFAULT_CHARSET|SAFER_PASSWORDS|FLOAT_PRECISION|LOOK_OBEY_TERSE|FUNCTION_ALIAS|STARTING_MONEY|SEE_OWNED_DARK|SUBSTITUTIONS2|PUBLIC_CHANNEL|PUEBLO_MESSAGE|GUEST_CHAR_NUM|STRIPPED_FLAGS|GUESTS_CHANNEL|SUBSTITUTIONS3|NOSITEMON_SITE|CRASH_DATABASE|SPACE_COMPRESS|MAX_CACHE_SIZE|STARTING_QUOTA|TOAD_RECIPIENT|INPUT_DATABASE|CHECK_INTERVAL|MAIL\\-REVIEWING|DEF_PLAYER_RX|QUIET_WHISPER|SIGNAL_ACTION|GAME_PAG_FILE|MAIL\\-EXAMPLES|IDLE_INTERVAL|HELP_EXECUTOR|MAIL_SENDADDR|CONFIG_ACCESS|GAME_DIR_FILE|DARK_SLEEPERS|REALITY_LEVEL|MAIL_PER_HOUR|FUNCTION_NAME|IDLE_WIZ_DARK|EXAMINE_FLAGS|MAIL_DATABASE|TRACE_TOPDOWN|EVAL_COMTITLE|RESTRICT_HOME|REGISTER_SITE|DEF_PLAYER_TX|MAIL\\-SENDING2|SUBSTITUTIONS|DUMP_INTERVAL|MAIL_SENDNAME|RESET_PLAYERS|CRASH_MESSAGE|NUMBER_GUESTS|PLAYER_PARENT|MAIL\\-SENDING3|KILL_MIN_COST|GDBM_DATABASE|PLAYER_LISTEN|KILL_MAX_COST|CHECK_OFFSET|NOGUEST_SITE|PERMISSIONS2|SUSPECT_SITE|OUTPUTSUFFIX|MAIL\\-SENDING|OUTPUT_LIMIT|INITIAL_SIZE|DEF_THING_RX|NEWUSER_FILE|THING_PARENT|ARTICLE_RULE|CONNECT_FILE|RAW_HELPFILE|PLAYER_FLAGS|PLAYER_QUOTA|ROBOT_SPEECH|MOTD_MESSAGE|DUMP_MESSAGE|SQL_DATABASE|DEF_THING_TX|BADSITE_FILE|DEFAULT_HOME|OUTPUTPREFIX|REGISTRATION|MAIL\\-FOLDERS|PUBLIC_FLAGS|PERMISSIONS3|IDLE_TIMEOUT|MAIL_SUBJECT|UNOWNED_SAFE|CONN_TIMEOUT|SQL_PASSWORD|MAIL\\-READING|FORBID_SITE|RUN_STARTUP|DUMP_OFFSET|DEF_EXIT_TX|MAX_PLAYERS|SEMAPHORES2|DEF_ROOM_TX|LAG_MAXIMUM|HAVE_MAILER|EXIT_PARENT|LIST_ACCESS|THING_QUOTA|SEARCH_COST|GUEST_NUKER|CACHE_DEPTH|INHERITANCE|THING_FLAGS|PERMIT_SITE|ROBOT_FLAGS|INDENT_DESC|CACHE_WIDTH|ROOM_PARENT|HAVE_COMSYS|PERMISSIONS|CACHE_NAMES|DEF_ROOM_RX|LOG_OPTIONS|UNINSPECTED|COMPRESSION|MAIL_SERVER|CACHE_PAGES|MAIL\\-OTHER2|FLAG_ACCESS|RETRY_LIMIT|STACK_LIMIT|STATUS_FILE|ATTR_ACCESS|DEF_EXIT_RX|POWER_ALIAS|TRANSPARENT|MASTER_ROOM|MAIL\\-ADMIN|SQL_SERVER|ARBITRARY2|GUEST_FILE|GUEST_SITE|TRUST_SITE|SWEEP_DARK|EXIT_FLAGS|FLAG_ALIAS|ATTR_ALIAS|QUIET_LOOK|MIN_GUESTS|EARN_LIMIT|MAIL\\-OTHER|ROBOT_COST|NO_COMMAND|DESTROY_OK|HAVE_ZONES|ROOM_FLAGS|CACHE_TRIM|SEMAPHORES|SITE_CHARS|UNFINDABLE|EXIT_QUOTA|AUDITORIUM|IP_ADDRESS|ROOM_QUOTA|RESET_SITE|CONNECTED|LINK_COST|WAIT_COST|DOWN_FILE|OPEN_COST|MAIL_EHLO|CONVTIME2|FORK_DUMP|GOOD_NAME|HOSTNAMES|FLAG_NAME|KEEPALIVE|TIMESLICE|LISTENING|LBUF_SIZE|FUNCTIONS|FULL_FILE|QUIT_FILE|PARENT_OK|SAFE_WIPE|COMMANDS2|LAG_LIMIT|INVENTORY|PAGE_COST|MOTD_FILE|CONVTIME3|MUD_NAME|EXAMINE2|DROP\\-TOS|CAUTIONS|REGEXPS2|SQL_USER|COLOR256|SPOOFING|ENTER_OK|HOOK_OBJ|SWITCHES|DIG_COST|PAYCHECK|CLEARCOM|COMTITLE|BAD_NAME|VACATION|FLOATING|IMMORTAL|HOOK_CMD|AUTOZONE|HELPFILE|CHOWN_OK|COMMANDS|CONTROL|SIGNALS|FAILURE|ULOCAL2|MOVING2|VERSION|ROYALTY|MOVING3|NOSPOOF|CHIMERA|SUSPECT|ATTRIB2|VERBOSE|LOOPING|PARENT2|ENACTOR|COMLIST|PEERING|ACCENT2|STARTUP|SUCCESS|CREDITS|SESSION|WIZARDS|WIZHELP|LOGGING|PUPPETS|LINK_OK|OPEN_OK|INHERIT|WHISPER|ACCENT3|MONITOR|INCLUDE|JUMP_OK|GARBAGE|EXAMINE|NOBLEED|LOCATE3|AUDIBLE|ATTRIB3|LINKING|ACCENT4|SITEMON|REGEXPS|UNICODE|LOCATE2|PUPPET|ZONES2|HALTED|COMSYS|MOVING|PLAYER|FILES2|MYOPIC|SHROUD|TRACE2|ADDCOM|MATRIX|DELCOM|MODULE|ALLCOM|REPORT|ZONES3|MARKED|MEDIUM|LOGOUT|TOPICS|ACCESS|GAGGED|ZONES4|WIZARD|VISUAL|PUEBLO|QUOTAS|GENDER|STICKY|PIPING|OPAQUE|COSTS|ZONES|TRAIN|ANSI2|PAGE2|BLIND|EXITS|THROW|LIGHT|GOALS|HAVEN|ALIAS|PAGE3|ENTER|LEAVE|DOING|ASCII|FILES|SCORE|MONEY|THINK|FLAGS|TRACE|ABODE|ROBOT|FIXED|WRAP2|VERBS|LISTS|GOING|SLAVE|QUIET|STAFF|TAKE2|TERSE|HOMES|UMBRA|STACK|PAGE|PORT|POSE|SLAY|NEWS|ROOM|HEAD|HERE|TAKE|HELP|DEAD|MOD2|GOTO|DARK|DROP|ANSI|KILL|SAFE|IPV4|GET2|HTML|QUIT|IPV6|READ|INFO|GIVE|MOVE|LOOK|KEY|USE|OBF|GET|WHO|SAY|FAE|LOG|HSS|ME)\\b",
      "name": "constant.language.flag.mush"
    },
    "strings": {
      "patterns": [
        {
          "begin": "\"",
          "end": "\"",
          "name": "string.quoted.double.mush",
          "patterns": [
            {
              "match": "\\\\.",
              "name": "constant.character.escape.mush"
            }
          ]
        }
      ]
    }
  }
}